<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Commande ‚Äî V√©loKid</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700;800&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="style.css">
</head>
<body>

  <nav class="navbar scrolled" id="navbar">
    <div class="navbar-inner">
      <a href="index.html" class="logo">
        <svg class="logo-svg" viewBox="0 0 52 38" fill="none" xmlns="http://www.w3.org/2000/svg">
          <circle cx="11" cy="28" r="8.5" stroke="#FF6B35" stroke-width="2.5"/>
          <circle cx="11" cy="28" r="2.5" fill="#FF6B35"/>
          <circle cx="41" cy="28" r="8.5" stroke="#FF6B35" stroke-width="2.5"/>
          <circle cx="41" cy="28" r="2.5" fill="#FF6B35"/>
          <line x1="11" y1="28" x2="24" y2="28" stroke="#FF6B35" stroke-width="2.5" stroke-linecap="round"/>
          <line x1="24" y1="28" x2="21" y2="11" stroke="#FF6B35" stroke-width="2.5" stroke-linecap="round"/>
          <line x1="21" y1="11" x2="35" y2="14" stroke="#FF6B35" stroke-width="2.5" stroke-linecap="round"/>
          <line x1="24" y1="28" x2="35" y2="14" stroke="#FF6B35" stroke-width="2.5" stroke-linecap="round"/>
          <line x1="35" y1="14" x2="41" y2="28" stroke="#FF6B35" stroke-width="2.5" stroke-linecap="round"/>
          <line x1="35" y1="14" x2="35" y2="8" stroke="#FF6B35" stroke-width="2.5" stroke-linecap="round"/>
          <line x1="31.5" y1="8" x2="39" y2="8" stroke="#FF6B35" stroke-width="2.5" stroke-linecap="round"/>
          <line x1="17.5" y1="10" x2="25" y2="10" stroke="#FF6B35" stroke-width="3" stroke-linecap="round"/>
          <circle cx="24" cy="28" r="3" fill="#FF6B35"/>
        </svg>
        V√©lo<span>Kid</span>
      </a>
      <ul class="nav-links">
        <li><a href="index.html"           class="nav-link" data-i18n="nav_home">Accueil</a></li>
        <li><a href="boutique.html"        class="nav-link" data-i18n="nav_shop">Boutique</a></li>
        <li><a href="qui-sommes-nous.html" class="nav-link" data-i18n="nav_about">Qui sommes-nous</a></li>
        <li><a href="contact.html"         class="nav-link" data-i18n="nav_contact">Contact</a></li>
      </ul>
      <div style="display:flex;align-items:center;gap:8px">
        <button class="lang-toggle" id="langToggle" onclick="toggleLanguage()">üá¨üáß EN</button>
        <button class="cart-trigger" onclick="showCartDrawer()">üõí<span class="cart-badge">0</span></button>
      </div>
      <button class="hamburger" id="hamburger"><span></span><span></span><span></span></button>
    </div>
  </nav>
  <nav class="mobile-nav" id="mobileNav">
    <a href="index.html"           class="nav-link">üè† Accueil</a>
    <a href="boutique.html"        class="nav-link">üö≤ Boutique</a>
    <a href="qui-sommes-nous.html" class="nav-link">üë• Qui sommes-nous</a>
    <a href="contact.html"         class="nav-link">‚úâÔ∏è Contact</a>
  </nav>

  <!-- HERO -->
  <section class="page-hero">
    <div class="container">
      <div class="breadcrumb">
        <a href="index.html">Accueil</a> ‚Ä∫ <a href="panier.html">Panier</a> ‚Ä∫ <span data-i18n="order_title">Commande</span>
      </div>
      <h1 data-i18n="order_title">Votre commande</h1>
    </div>
  </section>

  <!-- STEPS -->
  <section class="section-sm">
    <div class="container">
      <div class="pay-steps">
        <div class="pay-step done">‚úì Panier</div>
        <div class="pay-step active" data-i18n="order_shipping">Livraison</div>
        <div class="pay-step" data-i18n="pay_title">Paiement</div>
        <div class="pay-step">Confirmation</div>
      </div>
    </div>
  </section>

  <!-- CHECKOUT -->
  <section class="section" style="padding-top:0">
    <div class="container">
      <div class="checkout-layout">
        <!-- Formulaire livraison -->
        <div class="checkout-form-section">
          <h2 data-i18n="order_shipping">Informations de livraison</h2>
          <form id="orderForm" onsubmit="submitOrder(event)">
            <div class="form-row">
              <div class="form-group">
                <label data-i18n="order_name">Pr√©nom *</label>
                <input type="text" required placeholder="Marie" data-i18n-placeholder="order_name">
              </div>
              <div class="form-group">
                <label data-i18n="order_lastname">Nom *</label>
                <input type="text" required placeholder="Dupont" data-i18n-placeholder="order_lastname">
              </div>
            </div>
            <div class="form-group">
              <label data-i18n="order_email">Email *</label>
              <input type="email" required placeholder="marie@exemple.fr">
            </div>
            <div class="form-group">
              <label data-i18n="order_phone">T√©l√©phone *</label>
              <input type="tel" required placeholder="06 12 34 56 78">
            </div>
            <div class="form-group">
              <label data-i18n="order_address">Adresse *</label>
              <input type="text" required placeholder="12 rue des Fleurs">
            </div>
            <div class="form-row">
              <div class="form-group">
                <label data-i18n="order_zip">Code postal *</label>
                <input type="text" required placeholder="75011">
              </div>
              <div class="form-group">
                <label data-i18n="order_city">Ville *</label>
                <input type="text" required placeholder="Paris">
              </div>
            </div>
            <div class="form-group">
              <label data-i18n="order_country">Pays</label>
              <select>
                <option value="FR">France</option>
                <option value="BE">Belgique</option>
                <option value="CH">Suisse</option>
                <option value="LU">Luxembourg</option>
              </select>
            </div>
            <!-- Mode de livraison -->
            <div style="margin-bottom:24px">
              <p style="font-weight:600;color:var(--dark);margin-bottom:12px;font-size:.9rem">Mode de livraison</p>
              <label style="display:flex;align-items:center;gap:12px;padding:14px;border:2px solid var(--primary);border-radius:var(--radius);cursor:pointer;margin-bottom:10px;background:rgba(255,107,53,.04)">
                <input type="radio" name="livraison" value="standard" checked style="accent-color:var(--primary)">
                <div><div style="font-weight:600;font-size:.9rem">üöö Standard ‚Äî 2 √† 4 jours</div><div style="font-size:.8rem;color:var(--gray)">Gratuite d√®s 99 ‚Ç¨ ¬∑ sinon 9,90 ‚Ç¨</div></div>
              </label>
              <label style="display:flex;align-items:center;gap:12px;padding:14px;border:2px solid var(--light-gray);border-radius:var(--radius);cursor:pointer">
                <input type="radio" name="livraison" value="express" style="accent-color:var(--primary)">
                <div><div style="font-weight:600;font-size:.9rem">‚ö° Express ‚Äî 24h</div><div style="font-size:.8rem;color:var(--gray)">14,90 ‚Ç¨ ¬∑ Commande avant 12h</div></div>
              </label>
            </div>
            <button type="submit" class="btn btn-primary" style="width:100%;justify-content:center;font-size:1rem" data-i18n="order_confirm">
              Confirmer et payer ‚Üí
            </button>
          </form>
        </div>

        <!-- R√©cap commande -->
        <div class="order-recap" id="orderRecap">
          <h3 data-i18n="order_summary">R√©capitulatif</h3>
          <div id="recapItems"></div>
          <div style="border-top:1px solid #ddd;margin-top:16px;padding-top:16px">
            <div class="summary-row"><span data-i18n="cart_shipping">Livraison</span><span id="recapShipping">‚Äî</span></div>
            <div class="summary-row total"><span data-i18n="order_total">Total</span><span id="recapTotal" style="color:var(--primary)">‚Äî</span></div>
          </div>
          <div style="background:rgba(6,214,160,.08);border:1px solid rgba(6,214,160,.3);border-radius:8px;padding:12px;margin-top:16px;font-size:.8rem;color:#059669">
            üîí Paiement 100 % s√©curis√© ‚Äî SSL + 3D Secure
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- FOOTER minimal -->
  <footer class="footer">
    <div class="container">
      <div class="footer-bottom">
        <p data-i18n="footer_copy">¬© 2025 V√©loKid. Tous droits r√©serv√©s.</p>
        <div class="footer-bottom-links">
          <a href="cgv.html" data-i18n="footer_cgv">CGV</a>
          <a href="mentions-legales.html" data-i18n="footer_legal">Mentions l√©gales</a>
        </div>
      </div>
    </div>
  </footer>

  <div class="cart-overlay" id="cartOverlay"></div>
  <aside class="cart-drawer" id="cartDrawer">
    <div class="cart-drawer-header">
      <h3 data-i18n="cart_drawer_title">Panier</h3>
      <button class="cart-drawer-close" onclick="closeCartDrawer()">‚úï</button>
    </div>
    <div class="cart-drawer-body"></div>
    <div class="cart-drawer-footer"></div>
  </aside>
  <div class="cart-toast" id="cartToast"><span class="cart-toast-icon">‚úÖ</span><span id="cartToastMsg"></span></div>

  <script src="translations.js"></script>
  <script src="cart.js"></script>
  <script src="script.js"></script>
  <script>
  function renderRecap() {
    const cart = getCart();
    const total = getTotal();
    const shipping = total >= 99 ? 0 : 9.9;
    document.getElementById('recapItems').innerHTML = cart.map(item => `
      <div class="recap-item">
        <div class="recap-item-img"><img src="${item.img}" alt="${item.name}" loading="lazy"></div>
        <div class="recap-item-info">
          <div class="recap-item-name">${item.name} <span style="color:var(--gray)">√ó${item.qty}</span></div>
          <div class="recap-item-price">${(item.price * item.qty).toFixed(2)} ‚Ç¨</div>
        </div>
      </div>`).join('');
    document.getElementById('recapShipping').innerHTML = shipping === 0 ? '<span style="color:var(--success)">Gratuite ‚úì</span>' : '9,90 ‚Ç¨';
    document.getElementById('recapTotal').textContent = (total + shipping).toFixed(2) + ' ‚Ç¨';
  }

  function submitOrder(e) {
    e.preventDefault();
    // Sauvegarder infos livraison et rediriger vers paiement
    const form = e.target;
    const inputs = form.querySelectorAll('input[type=text], input[type=email], input[type=tel]');
    const data = {};
    inputs.forEach((inp, i) => data[i] = inp.value);
    localStorage.setItem('velokid_order', JSON.stringify(data));
    window.location.href = 'paiement.html';
  }

  document.addEventListener('DOMContentLoaded', () => {
    if (getCart().length === 0) window.location.href = 'panier.html';
    renderRecap();
  });
  </script>
</body>
</html>
